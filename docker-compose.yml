version: '3.8'

services:
  rsshub:
    image: diygod/rsshub:latest
    container_name: rsshub
    restart: unless-stopped
    ports:
      - "1200:1200"
    environment:
      # Optional: Configure RSSHub settings
      NODE_ENV: production
      CACHE_TYPE: memory
      # CACHE_EXPIRE: 300  # Cache TTL in seconds (default: 5 minutes)
      # LOGGER_LEVEL: info  # Logging level: debug, info, warn, error
      
      # Optional: Rate limiting (uncomment if needed)
      # RATE_LIMIT: 100  # Max requests per minute per IP
      
      # Optional: LinkedIn-specific settings (uncomment if needed)
      # LINKEDIN_USERNAME: your_email@example.com
      # LINKEDIN_PASSWORD: your_password

    # Optional: Use volume for persistent cache
    # volumes:
    #   - ./rsshub-cache:/app/cache

    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:1200/healthz"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  default:
    name: cmmcwatch-network
